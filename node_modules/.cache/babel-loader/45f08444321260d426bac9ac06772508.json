{"remainingRequest":"/Users/duyennguyen/STREAMING/ask-around-me/frontend/node_modules/babel-loader/lib/index.js!/Users/duyennguyen/STREAMING/ask-around-me/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/duyennguyen/STREAMING/ask-around-me/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/duyennguyen/STREAMING/ask-around-me/frontend/src/views/HomeView.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/duyennguyen/STREAMING/ask-around-me/frontend/src/views/HomeView.vue","mtime":1626863039993},{"path":"/Users/duyennguyen/STREAMING/ask-around-me/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/duyennguyen/STREAMING/ask-around-me/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/duyennguyen/STREAMING/ask-around-me/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/duyennguyen/STREAMING/ask-around-me/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9kdXllbm5ndXllbi9TVFJFQU1JTkcvYXNrLWFyb3VuZC1tZS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy9kdXllbm5ndXllbi9TVFJFQU1JTkcvYXNrLWFyb3VuZC1tZS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgYnVzIH0gZnJvbSAnLi4vbWFpbic7CmltcG9ydCBRdWVzdGlvbiBmcm9tICdAL2NvbXBvbmVudHMvUXVlc3Rpb24udnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJIb21lVmlldyIsCiAgY29tcG9uZW50czogewogICAgUXVlc3Rpb246IFF1ZXN0aW9uCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY3VycmVudExhdDogNDAuNzM1ODIzNSwKICAgICAgY3VycmVudExuZzogLTczLjk5MjcxMDIsCiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIHVzZXI6IG51bGwKICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoWydxdWVzdGlvbnMnXSkpLAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIGNvbnNvbGUubG9nKCdtb3VudGVkJyk7CiAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKGZ1bmN0aW9uIChwb3NpdGlvbikgewogICAgICBjb25zb2xlLmxvZygnUG9zaXRpb24gcmV0dXJuZWQ6ICcsIHBvc2l0aW9uKTsKCiAgICAgIF90aGlzLiRzdG9yZS5jb21taXQoJ3NldFBvc2l0aW9uJywgcG9zaXRpb24pOwoKICAgICAgX3RoaXMuY3VycmVudExhdCA9IHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZTsKICAgICAgX3RoaXMuY3VycmVudExuZyA9IHBvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGU7CgogICAgICBfdGhpcy51cGRhdGVSZXN1bHRzKCk7CiAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnNvbGUubG9nKCdFcnJvcjogVGhlIEdlb2xvY2F0aW9uIHNlcnZpY2UgZmFpbGVkLicpOwogICAgfSwgewogICAgICBlbmFibGVIaWdoQWNjdXJhY3k6IHRydWUsCiAgICAgIHRpbWVvdXQ6IDMwMDAwCiAgICB9KTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICBidXMuJG9uKCdhdXRoZW50aWNhdGVkJywgLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodXNlcikgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMi4kc3RvcmUuY29tbWl0KCdzZXRVc2VyJywgdXNlcik7CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VzZXIgc2lnbmVkIGluOiAnLCBfdGhpczIuJHN0b3JlLmdldHRlcnMuZ2V0VXNlcik7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICB1cGRhdGVSZXN1bHRzOiBmdW5jdGlvbiB1cGRhdGVSZXN1bHRzKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciB0b2tlbiwgdXJsLCBfeWllbGQkYXhpb3MkZ2V0LCBkYXRhOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKF90aGlzMy4kc3RvcmUuZ2V0dGVycy5pc0luaXRpYWxpemVkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLiRhdXRoLmdldFRva2VuU2lsZW50bHkoKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgdG9rZW4gPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIC8vIE9ubHkgdXNlIHRoaXMgbGluZSBmb3IgZGVidWdnaW5nISBJdCBkaXNwbGF5cyB0aGUgSldUIHRva2VuIGluIHRoZSBicm93c2VyIGNvbnNvbGUuCiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0b2tlbikKICAgICAgICAgICAgICAgIHVybCA9ICIiLmNvbmNhdChfdGhpczMuJEFQSXVybCwgIi9xdWVzdGlvbnM/bGF0PSIpLmNvbmNhdChfdGhpczMuY3VycmVudExhdCwgIiZsbmc9IikuY29uY2F0KF90aGlzMy5jdXJyZW50TG5nKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVUkw6ICcsIHVybCk7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDk7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KHVybCwgewogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0b2tlbikgLy8gc2VuZCB0aGUgYWNjZXNzIHRva2VuIHRocm91Z2ggdGhlICdBdXRob3JpemF0aW9uJyBoZWFkZXIKCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBfeWllbGQkYXhpb3MkZ2V0ID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBkYXRhID0gX3lpZWxkJGF4aW9zJGdldC5kYXRhOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1Jlc3BvbnNlOiAnLCBkYXRhKTsKCiAgICAgICAgICAgICAgICBfdGhpczMuJHN0b3JlLmNvbW1pdCgnc2V0QWxsUXVlc3Rpb25zJywgZGF0YSk7CgogICAgICAgICAgICAgICAgX3RoaXMzLmxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["HomeView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyHA,OAAA,KAAA,MAAA,OAAA;AACA,SAAA,QAAA,QAAA,MAAA;AACA,SAAA,GAAA,QAAA,SAAA;AACA,OAAA,QAAA,MAAA,2BAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,QAAA,EAAA;AADA,GAFA;AAKA,EAAA,IAAA,EAAA,gBAAA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,UADA;AAEA,MAAA,UAAA,EAAA,CAAA,UAFA;AAGA,MAAA,OAAA,EAAA,IAHA;AAIA,MAAA,IAAA,EAAA;AAJA,KAAA;AAMA,GAZA;AAaA,EAAA,QAAA,oBACA,QAAA,CAAA,CAAA,WAAA,CAAA,CADA,CAbA;AAgBA,EAAA,OAhBA,qBAgBA;AAAA;;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,SAAA;AACA,IAAA,SAAA,CAAA,WAAA,CAAA,kBAAA,CAAA,UAAA,QAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,qBAAA,EAAA,QAAA;;AACA,MAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,aAAA,EAAA,QAAA;;AACA,MAAA,KAAA,CAAA,UAAA,GAAA,QAAA,CAAA,MAAA,CAAA,QAAA;AACA,MAAA,KAAA,CAAA,UAAA,GAAA,QAAA,CAAA,MAAA,CAAA,SAAA;;AACA,MAAA,KAAA,CAAA,aAAA;AACA,KANA,EAMA,YAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,wCAAA;AACA,KARA,EAQA;AACA,MAAA,kBAAA,EAAA,IADA;AAEA,MAAA,OAAA,EAAA;AAFA,KARA;AAYA,GA9BA;AA+BA,EAAA,OA/BA,qBA+BA;AAAA;;AACA,IAAA,GAAA,CAAA,GAAA,CAAA,eAAA;AAAA,yEAAA,iBAAA,IAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,SAAA,EAAA,IAAA;;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,kBAAA,EAAA,MAAA,CAAA,MAAA,CAAA,OAAA,CAAA,OAAA;;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAA;;AAAA;AAAA;AAAA;AAAA;AAKA,GArCA;AAsCA,EAAA,OAAA,EAAA;AACA,IAAA,aADA,2BACA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA,MAAA,CAAA,MAAA,CAAA,OAAA,CAAA,aADA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,uBAEA,MAAA,CAAA,KAAA,CAAA,gBAAA,EAFA;;AAAA;AAEA,gBAAA,KAFA;AAIA;AACA;AACA,gBAAA,GANA,aAMA,MAAA,CAAA,OANA,4BAMA,MAAA,CAAA,UANA,kBAMA,MAAA,CAAA,UANA;AAOA,gBAAA,OAAA,CAAA,GAAA,CAAA,OAAA,EAAA,GAAA;AAPA;AAAA,uBAQA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA;AACA,kBAAA,OAAA,EAAA;AACA,oBAAA,aAAA,mBAAA,KAAA,CADA,CACA;;AADA;AADA,iBAAA,CARA;;AAAA;AAAA;AAQA,gBAAA,IARA,oBAQA,IARA;AAaA,gBAAA,OAAA,CAAA,GAAA,CAAA,YAAA,EAAA,IAAA;;AACA,gBAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,iBAAA,EAAA,IAAA;;AACA,gBAAA,MAAA,CAAA,OAAA,GAAA,KAAA;;AAfA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBA;AAjBA;AAtCA,CAAA","sourcesContent":["<template>\n  <v-container class=\"pa-0 ma-0\">\n\n    <!-- Intro screen for unauthenticated users -->\n    <div id=\"unauth-view\" v-if=\"!$auth.isAuthenticated\">\n      <v-card class=\"ma-2\">\n        <v-list-item>\n          <v-list-item-avatar color=\"grey\"></v-list-item-avatar>\n          <v-list-item-content>\n            <v-list-item-title class=\"headline\">Welcome!</v-list-item-title>\n            <v-list-item-subtitle>Share local knowledge</v-list-item-subtitle>\n          </v-list-item-content>\n        </v-list-item>\n    \n        <v-img\n          src=\"@/assets/overview.jpg\"\n          height=\"194\"\n        ></v-img>\n    \n        <v-card-text>\n          Who serves the best coffee? Where's the best local park? Get the answers to these questions and more from a local audience!\n        </v-card-text>\n    \n        <v-card-actions>\n          <v-btn text color=\"orange\" href=\"https://bit.ly/askaroundme\"  target=\"_blank\">\n            Learn more\n          </v-btn>\n          <v-btn text color=\"orange\" href=\"https://github.com/aws-samples/ask-around-me/\"  target=\"_blank\">\n            GitHub\n          </v-btn>\n          <v-spacer></v-spacer>\n        </v-card-actions>\n      </v-card>\n    </div>\n\n    <!-- Questions list for authenticated users -->\n    <v-container class=\"pa-0 ma-0\" id=\"auth-view\" v-if=\"$auth.isAuthenticated\">\n      <GmapMap\n        :center=\"{lat:this.currentLat, lng:this.currentLng}\"\n        :zoom=\"7\"\n        map-type-id=\"roadmap\"\n        style=\"width: 100%; height: 300px\"\n        :options=\"{\n          zoomControl: true,\n          zoom: 11,\n          mapTypeControl: false,\n          scaleControl: false,\n          streetViewControl: false,\n          rotateControl: false,\n          fullscreenControl: false,\n          disableDefaultUI: false\n        }\"\n      > \n        <GmapMarker\n          :key=\"index\"\n          v-for=\"(m, index) in questions\"\n          :position=\"{lat: m.latitude, lng: m.longitude}\"\n          :clickable=\"false\"\n          :draggable=\"false\"\n          @click=\"center=m.position\"\n        />\n        <GmapCircle\n          :center=\"{lat: currentLat, lng: currentLng}\"\n          :radius=\"8000\"\n          :options=\"{\n            fillColor:'blue',\n            fillOpacity:0.1,\n            strokeColor: '#0000FF',\n            strokeOpacity: 0.2,\n            strokeWeight: 5\n          }\"\n        />\n      </GmapMap>     \n    </v-container>\n\n    <!-- Loading spinner -->\n    <v-container v-if=\"$auth.isAuthenticated && loading\" >\n      <div class=\"text-center\">\n        <v-progress-circular\n          :size=\"50\"\n          color=\"orange\"\n          indeterminate\n        ></v-progress-circular>        \n      </div>  \n    </v-container>\n\n    <!-- No questions - prompt user to ask one -->\n    <v-container v-if=\"questions.length === 0 && !loading\" >\n      <v-card class=\"ma-2\">\n        <v-card-title class=\"headline\">No questions here</v-card-title>\n        <v-card-subtitle>Whoa! This is a quiet neighborhood. Be the first to ask a question.</v-card-subtitle>\n        <v-card-actions>\n          <v-btn color=\"orange\" text>Ask question</v-btn>\n        </v-card-actions>\n      </v-card>    \n    </v-container>\n    <v-container class=\"pa-0 ma-0\" v-if=\"questions.length > 0\">\n      <v-container class=\"pa-0 ma-0\" v-bind:key=\"index\" v-for=\"(question, index) in questions\">\n        <Question v-bind:question=\"question\"/>\n      </v-container>\n    </v-container>\n\n    <!-- Add question icon -->\n    <v-container class=\"pa-0 ma-0\">\n      <v-btn \n        v-if=\"$auth.isAuthenticated\" \n        fixed\n        dark\n        fab\n        bottom\n        right\n        color=\"red\"\n        class=\"mb-4\"\n        to=\"/ask\">\n        <v-icon>add</v-icon>\n      </v-btn>\n    </v-container>\n  </v-container>\n</template>\n\n<script>\n  import axios from \"axios\"\n  import { mapState } from 'vuex'\n  import { bus } from '../main'\n  import Question from '@/components/Question.vue'\n\n  export default {\n    name: \"HomeView\",\n    components: {\n      Question\n    },\n    data: function () {   \n      return {\n        currentLat: 40.7358235,\n        currentLng: -73.9927102,\n        loading: true,\n        user: null\n      }\n    },\n    computed: {\n      ...mapState(['questions'])\n    },\n    mounted () {\n      console.log('mounted')\n      navigator.geolocation.getCurrentPosition((position) => {\n        console.log('Position returned: ', position)\n        this.$store.commit('setPosition', position)\n        this.currentLat = position.coords.latitude\n        this.currentLng = position.coords.longitude\n        this.updateResults()\n      }, () => {\n        console.log('Error: The Geolocation service failed.')\n      }, {\n        enableHighAccuracy: true,\n        timeout: 30000\n      })\n    },\n    created () {\n      bus.$on('authenticated', async (user) => {\n        this.$store.commit('setUser', user)\n        console.log('User signed in: ', this.$store.getters.getUser)\n\n      })\n    },\n    methods: {\n      async updateResults() {\n        if (!this.$store.getters.isInitialized) return\n        const token = await this.$auth.getTokenSilently()\n\n        // Only use this line for debugging! It displays the JWT token in the browser console.\n        // console.log(token)\n        const url = `${this.$APIurl}/questions?lat=${this.currentLat}&lng=${this.currentLng}`\n        console.log('URL: ', url)\n        const { data } = await axios.get(url, {\n          headers: {\n            Authorization: `Bearer ${token}`    // send the access token through the 'Authorization' header\n          }\n        })\n        console.log('Response: ', data)\n        this.$store.commit('setAllQuestions', data)\n        this.loading = false\n      }\n    }\n  }\n</script>\n"],"sourceRoot":"src/views"}]}